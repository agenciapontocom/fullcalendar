/*!
 * FullCalendar v2.0.2
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2014 Adam Shaw, Sean Kenny
 */
(function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)})(function(t,e){function n(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function r(t,e){var n=e.longDateFormat("L");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n}function a(t){o(_e,t)}function o(e){function n(n,r){t.isPlainObject(r)&&t.isPlainObject(e[n])&&!i(n)?e[n]=o({},e[n],r):void 0!==r&&(e[n]=r)}for(var r=1;arguments.length>r;r++)t.each(arguments[r],n);return e}function i(t){return/(Time|Duration)$/.test(t)}function s(n,r){function a(t){var n=e.localeData||e.langData;return n.call(e,t)||n.call(e,"en")}function i(t){de?h()&&(w(),D(t)):s()}function s(){ue=oe.theme?"ui":"fc",n.addClass("fc"),oe.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),oe.theme&&n.addClass("ui-widget"),de=t("<div class='fc-content' />").prependTo(n),le=new l(re,oe),ce=le.render(),ce&&n.prepend(ce),g(oe.defaultView),oe.handleWindowResize&&t(window).resize(E),p()||d()}function d(){setTimeout(function(){!fe.start&&p()&&y()},0)}function v(){fe&&(te("viewDestroy",fe,fe,fe.element),fe.triggerEventDestroy()),t(window).unbind("resize",E),oe.droppable&&t(document).off("dragstart",ee).off("dragstop",ne),fe.selectionManagerDestroy&&fe.selectionManagerDestroy(),le.destroy(),de.remove(),n.removeClass("fc fc-ltr fc-rtl ui-widget")}function h(){return n.is(":visible")}function p(){return t("body").is(":visible")}function g(t){fe&&t==fe.name||m(t)}function m(e){we++,fe&&(te("viewDestroy",fe,fe,fe.element),W(),fe.triggerEventDestroy(),G(),fe.element.remove(),le.deactivateButton(fe.name)),le.activateButton(e),fe=new Fe[e](t("<div class='fc-view fc-view-"+e+"' />").appendTo(de),re),y(),U(),we--}function y(t){fe.start&&!t&&pe.isWithin(fe.intervalStart,fe.intervalEnd)||h()&&D(t)}function D(t){we++,fe.start&&(te("viewDestroy",fe,fe,fe.element),W(),R()),G(),t&&(pe=fe.incrementDate(pe,t)),fe.render(pe.clone()),T(),U(),(fe.afterRender||k)(),A(),F(),te("viewRender",fe,fe,fe.element),we--,z()}function b(){h()&&(W(),R(),w(),T(),M())}function w(){he=oe.contentHeight?oe.contentHeight:oe.height?oe.height-(ce?ce.height():0)-C(de):Math.round(de.width()/Math.max(oe.aspectRatio,.5))}function T(){void 0===he&&w(),we++,fe.setHeight(he),fe.setWidth(de.width()),we--,ve=n.outerWidth()}function E(t){if(!we&&t.target===window)if(fe.start){var e=++be;setTimeout(function(){e==be&&!we&&h()&&ve!=(ve=n.outerWidth())&&(we++,b(),fe.trigger("windowResize",De),we--)},oe.windowResizeDelay)}else d()}function S(){R(),_()}function x(t){R(),M(t)}function M(t){h()&&(fe.renderEvents(Te,t),"function"==typeof fe.renderAnnotations&&fe.renderAnnotations(Ce),fe.trigger("eventAfterAllRender"))}function R(){fe.triggerEventDestroy(),fe.clearEvents(),fe.clearEventData()}function z(){!oe.lazyFetching||me(fe.start,fe.end)?_():M()}function _(){ye(fe.start,fe.end)}function H(t){Te=t,M()}function N(t){x(t)}function A(){le.updateTitle(fe.title)}function F(){var t=re.getNow();t.isWithin(fe.intervalStart,fe.intervalEnd)?le.disableButton("today"):le.enableButton("today")}function O(t,e){fe.select(t,e)}function W(){fe&&fe.unselect()}function L(){y(-1)}function Y(){y(1)}function Z(){pe.add("years",-1),y()}function P(){pe.add("years",1),y()}function j(){pe=re.getNow(),y()}function I(t){pe=re.moment(t),y()}function $(t){pe.add(e.duration(t)),y()}function X(t){var e=new Date(t);e=re.moment(e),y()}function V(){return pe.clone()}function G(){de.css({width:"100%",height:de.height(),overflow:"hidden"})}function U(){de.css({width:"",height:"",overflow:""})}function Q(){return re}function J(){return fe}function K(t,e){return void 0===e?oe[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(oe[t]=e,b()),void 0)}function te(t,e){return oe[t]?oe[t].apply(e||De,Array.prototype.slice.call(arguments,2)):void 0}function ee(e,n){var r=e.target,a=t(r);if(!a.parents(".fc").length){var o=oe.dropAccept;(t.isFunction(o)?o.call(r,a):a.is(o))&&(ge=r,fe.dragStart(ge,e,n))}}function ne(t,e){ge&&(fe.dragStop(ge,t,e),ge=null)}var re=this;r=r||{};var ae,oe=o({},_e,r);ae=oe.lang in He?He[oe.lang]:He[_e.lang],ae&&(oe=o({},_e,ae,r)),oe.isRTL&&(oe=o({},_e,Ne,ae||{},r)),re.options=oe,re.render=i,re.destroy=v,re.refetchEvents=S,re.reportEvents=H,re.reportEventChange=N,re.rerenderEvents=x,re.changeView=g,re.select=O,re.unselect=W,re.prev=L,re.next=Y,re.prevYear=Z,re.nextYear=P,re.today=j,re.gotoDate=I,re.incrementDate=$,re.getDate=V,re.getCalendar=Q,re.getView=J,re.option=K,re.trigger=te,re.datePicker=X;var ie=f(a(oe.lang));if(oe.monthNames&&(ie._months=oe.monthNames),oe.monthNamesShort&&(ie._monthsShort=oe.monthNamesShort),oe.dayNames&&(ie._weekdays=oe.dayNames),oe.dayNamesShort&&(ie._weekdaysShort=oe.dayNamesShort),null!=oe.firstDay){var se=f(ie._week);se.dow=oe.firstDay,ie._week=se}re.defaultAllDayEventDuration=e.duration(oe.defaultAllDayEventDuration),re.defaultTimedEventDuration=e.duration(oe.defaultTimedEventDuration),re.moment=function(){var t;return"local"===oe.timezone?(t=Ae.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===oe.timezone?Ae.moment.utc.apply(null,arguments):Ae.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=ie:t._lang=ie,t},re.getIsAmbigTimezone=function(){return"local"!==oe.timezone&&"UTC"!==oe.timezone},re.rezoneDate=function(t){return re.moment(t.toArray())},re.getNow=function(){var t=oe.now;return"function"==typeof t&&(t=t()),re.moment(t)},re.calculateWeekNumber=function(t){var e=oe.weekNumberCalculation;return"function"==typeof e?e(t):"local"===e?t.week():"ISO"===e.toUpperCase()?t.isoWeek():void 0},re.getEventEnd=function(t){return t.end?t.end.clone():re.getDefaultEventEnd(t.allDay,t.start)},re.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(re.defaultAllDayEventDuration):n.add(re.defaultTimedEventDuration),re.getIsAmbigTimezone()&&n.stripZone(),n},re.formatRange=function(t,e,n){return"function"==typeof n&&(n=n.call(re,oe,ie)),q(t,e,n,null,oe.isRTL)},re.formatDate=function(t,e){return"function"==typeof e&&(e=e.call(re,oe,ie)),B(t,e)},c.call(re,oe),u.call(re,oe);var le,ce,de,ue,fe,ve,he,pe,ge,me=re.isFetchNeeded,ye=re.fetchEvents,De=n[0],be=0,we=0,Te=[],Ce=re.options.annotations;pe=null!=oe.defaultDate?re.moment(oe.defaultDate):re.getNow(),oe.droppable&&t(document).on("dragstart",ee).on("dragstop",ne)}function l(e,n){function r(){f=n.theme?"ui":"fc";var e=n.header;return e?v=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(o("left")).append(o("center")).append(o("right"))):void 0}function a(){v.remove()}function o(r){var a=t("<td class='fc-header-"+r+"'/>"),o=n.header[r];return o&&t.each(o.split(" "),function(r){r>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(r,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(f+"-corner-right"),o=null;else{var s;if(e[i]?s=e[i]:Fe[i]&&(s=function(){h.removeClass(f+"-state-hover"),e.changeView(i)}),s){var l,c=z(n.themeButtonIcons,i),d=z(n.buttonIcons,i),u=z(n.defaultButtonText,i),v=z(n.buttonText,i);l=v?_(v):c&&n.theme?"<span class='ui-icon ui-icon-"+c+"'></span>":d&&!n.theme?"<span class='fc-icon fc-icon-"+d+"'></span>":_(u||i);var h;"datePicker"==i?(h=t("<input type='image' src='images/calendar.gif'>"),h.datepicker({onSelect:function(t){var n=new Date(t);e.gotoDate(n)}}),h.appendTo(a)):(h=t("<span class='fc-button fc-button-"+i+" "+f+"-state-default'>"+l+"</span>").click(function(){h.hasClass(f+"-state-disabled")||s()}).mousedown(function(){h.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){h.removeClass(f+"-state-down")}).hover(function(){h.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){h.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),h.appendTo(a)),N(h),o||h.addClass(f+"-corner-left"),o=h}}}),o&&o.addClass(f+"-corner-right")}),a}function i(t){v.find("h2").html(t)}function s(t){v.find("span.fc-button-"+t).addClass(f+"-state-active")}function l(t){v.find("span.fc-button-"+t).removeClass(f+"-state-active")}function c(t){v.find("span.fc-button-"+t).addClass(f+"-state-disabled")}function d(t){v.find("span.fc-button-"+t).removeClass(f+"-state-disabled")}var u=this;u.render=r,u.destroy=a,u.updateTitle=i,u.activateButton=s,u.deactivateButton=l,u.disableButton=c,u.enableButton=d;var f,v=t([])}function c(e){function n(t,e){return!E||t.clone().stripZone()<E.clone().stripZone()||e.clone().stripZone()>S.clone().stripZone()}function r(t,e){E=t,S=e,F=[];var n=++H,r=_.length;N=r;for(var o=0;r>o;o++)a(_[o],n)}function a(e,n){o(e,function(r){var a,o,i=t.isArray(e.events);if(n==H){if(r)for(a=0;r.length>a;a++)o=r[a],i||(o=b(o,e)),o&&F.push(o);N--,N||M(F)}})}function o(n,r){var a,i,s=Ae.sourceFetchers;for(a=0;s.length>a;a++){if(i=s[a].call(C,n,E.clone(),S.clone(),e.timezone,r),i===!0)return;if("object"==typeof i)return o(i,r),void 0}var l=n.events;if(l)t.isFunction(l)?(y(),l.call(C,E.clone(),S.clone(),e.timezone,function(t){r(t),D()})):t.isArray(l)?r(l):r();else{var c=n.url;if(c){var d,u=n.success,f=n.error,v=n.complete;d=t.isFunction(n.data)?n.data():n.data;var h=t.extend({},d||{}),p=W(n.startParam,e.startParam),g=W(n.endParam,e.endParam),m=W(n.timezoneParam,e.timezoneParam);p&&(h[p]=E.format()),g&&(h[g]=S.format()),e.timezone&&"local"!=e.timezone&&(h[m]=e.timezone),y(),t.ajax(t.extend({},Oe,n,{data:h,success:function(e){e=e||[];var n=O(u,this,arguments);t.isArray(n)&&(e=n),r(e)},error:function(){O(f,this,arguments),r()},complete:function(){O(v,this,arguments),D()}}))}else r()}}function i(t){var e=s(t);e&&(_.push(e),N++,a(e,H))}function s(e){var n,r,a=Ae.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e),"string"==typeof n.className&&(n.className=n.className.split(/\s+/))),n){for(t.isArray(n.events)&&(n.origArray=n.events,n.events=t.map(n.events,function(t){return b(t,n)})),r=0;a.length>r;r++)a[r].call(C,n);return n}}function l(e){_=t.grep(_,function(t){return!c(t,e)}),F=t.grep(F,function(t){return!c(t.source,e)}),M(F)}function c(t,e){return t&&e&&u(t)==u(e)}function u(t){return("object"==typeof t?t.origArray||t.url||t.events:null)||t}function f(t){t.start=C.moment(t.start),t.end&&(t.end=C.moment(t.end)),w(t),v(t),M(F)}function v(t){var e,n,r,a;for(e=0;F.length>e;e++)if(n=F[e],n._id==t._id&&n!==t)for(r=0;L.length>r;r++)a=L[r],void 0!==t[a]&&(n[a]=t[a])}function p(t,e){var n=b(t);n&&(n.source||(e&&(z.events.push(n),n.source=z),F.push(n)),M(F))}function g(e){var n,r;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),F=t.grep(F,e,!0),r=0;_.length>r;r++)t.isArray(_[r].events)&&(_[r].events=t.grep(_[r].events,e,!0));M(F)}function m(e){return t.isFunction(e)?t.grep(F,e):null!=e?(e+="",t.grep(F,function(t){return t._id==e})):F}function y(){A++||x("loading",null,!0,k())}function D(){--A||x("loading",null,!1,k())}function b(n,r){var a,o,i,s,l={};return e.eventDataTransform&&(n=e.eventDataTransform(n)),r&&r.eventDataTransform&&(n=r.eventDataTransform(n)),a=C.moment(n.start||n.date),a.isValid()&&(o=null,!n.end||(o=C.moment(n.end),o.isValid()))?(i=n.allDay,void 0===i&&(s=W(r?r.allDayDefault:void 0,e.allDayDefault),i=void 0!==s?s:!(a.hasTime()||o&&o.hasTime())),i?(a.hasTime()&&a.stripTime(),o&&o.hasTime()&&o.stripTime()):(a.hasTime()||(a=C.rezoneDate(a)),o&&!o.hasTime()&&(o=C.rezoneDate(o))),t.extend(l,n),r&&(l.source=r),l._id=n._id||(void 0===n.id?"_fc"+We++:n.id+""),l.className=n.className?"string"==typeof n.className?n.className.split(/\s+/):n.className:[],l.resources?("number"==typeof l.resources&&(l.resources=[l.resources]),"string"==typeof l.resources&&(l.resources=l.resources.split(/\s+/))):l.resources=[],l.allDay=i,l.start=a,l.end=o,e.forceEventDuration&&!l.end&&(l.end=R(l)),d(l),l):void 0}function w(t,e,n){var r,a,o,i,s=t._allDay,l=t._start,c=t._end,d=!1;return e||n||(e=t.start,n=t.end),r=t.allDay!=s?t.allDay:!(e||n).hasTime(),r&&(e&&(e=e.clone().stripTime()),n&&(n=n.clone().stripTime())),e&&(a=r?h(e,l.clone().stripTime()):h(e,l)),r!=s?d=!0:n&&(o=h(n||C.getDefaultEventEnd(r,e||l),e||l).subtract(h(c||C.getDefaultEventEnd(s,l),l))),i=T(m(t._id),d,r,a,o),{dateDelta:a,durationDelta:o,undo:i}}function T(n,r,a,o,i){var s=C.getIsAmbigTimezone(),l=[];return t.each(n,function(t,n){var c=n._allDay,u=n._start,f=n._end,v=null!=a?a:c,h=u.clone(),p=!r&&f?f.clone():null;v?(h.stripTime(),p&&p.stripTime()):(h.hasTime()||(h=C.rezoneDate(h)),p&&!p.hasTime()&&(p=C.rezoneDate(p))),p||!e.forceEventDuration&&!+i||(p=C.getDefaultEventEnd(v,h)),h.add(o),p&&p.add(o).add(i),s&&(+o||+i)&&(h.stripZone(),p&&p.stripZone()),n.allDay=v,n.start=h,n.end=p,d(n),l.push(function(){n.allDay=c,n.start=u,n.end=f,d(n)})}),function(){for(var t=0;l.length>t;t++)l[t]()}}var C=this;C.isFetchNeeded=n,C.fetchEvents=r,C.addEventSource=i,C.removeEventSource=l,C.updateEvent=f,C.renderEvent=p,C.removeEvents=g,C.clientEvents=m,C.mutateEvent=w;var E,S,x=C.trigger,k=C.getView,M=C.reportEvents,R=C.getEventEnd,z={events:[]},_=[z],H=0,N=0,A=0,F=[];t.each((e.events?[e.events]:[]).concat(e.eventSources||[]),function(t,e){var n=s(e);n&&_.push(n)});var L=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function d(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}function u(e){function n(e){u=[];var n;if(t.isFunction(e))n={resources:e},u.push(n),c=void 0;else if("string"==typeof e)n={url:e},u.push(n),c=void 0;else if("object"==typeof e&&null!=e){for(var r=0;e.length>r;r++){var a=e[r];o(a),n={resources:a},u.push(n)}c=void 0}}function r(n,r){if(n=n!==void 0?n:!0,!n||void 0===c){c=[];for(var o=u.length,i=0;o>i;i++){var s=a(u[i],r);c=c.concat(s)}}return t.isFunction(e.resourceFilter)?t.grep(c,e.resourceFilter):c}function a(n,r){var a=n.resources;if(a){if(t.isFunction(a))return a()}else{var o=n.url;if(o){var i={};if("object"==typeof r){var s=e.startParam,l=e.endParam;s&&(i[s]=Math.round(+r.intervalStart/1e3)),l&&(i[l]=Math.round(+r.intervalEnd/1e3))}t.ajax(t.extend({},Oe,n,{data:i,dataType:"json",cache:!1,success:function(t){t=t||[],a=t},error:function(){},async:!1}))}}return a}function o(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Ae.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function i(t,e,n,r){var a,o,i,c,d=t._allDay,u=t._start,f=t._end,v=!1;return n||r||(n=t.start,r=t.end),a=t.allDay!=d?t.allDay:!(n||r).hasTime(),a&&(n&&(n=n.clone().stripTime()),r&&(r=r.clone().stripTime())),n&&(o=a?h(n,u.clone().stripTime()):h(n,u)),a!=d?v=!0:r&&(i=h(r||l.getDefaultEventEnd(a,n||u),n||u).subtract(h(f||l.getDefaultEventEnd(d,u),u))),c=s(l.clientEvents(t._id),v,a,o,i,e),{dateDelta:o,durationDelta:i,undo:c}}function s(n,r,a,o,i,s){var c=l.getIsAmbigTimezone(),u=[];return t.each(n,function(t,n){var f=n.resources,v=n._allDay,h=n._start,p=n._end,g=null!=a?a:v,m=h.clone(),y=!r&&p?p.clone():null;g?(m.stripTime(),y&&y.stripTime()):(m.hasTime()||(m=l.rezoneDate(m)),y&&!y.hasTime()&&(y=l.rezoneDate(y))),y||!e.forceEventDuration&&!+i||(y=l.getDefaultEventEnd(g,m)),m.add(o),y&&y.add(o).add(i),c&&(+o||+i)&&(m.stripZone(),y&&y.stripZone()),n.allDay=g,n.start=m,n.end=y,n.resources=s,d(n),u.push(function(){n.allDay=v,n.start=h,n.end=p,n.resources=f,d(n)})}),function(){for(var t=0;u.length>t;t++)u[t]()}}var l=this;l.fetchResources=r,l.setResources=n,l.mutateResourceEvent=i;var c,u=[];n(e.resources)}function f(t){var e=function(){};return e.prototype=t,new e}function v(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function h(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function g(e,n,r){e.unbind("mouseover").mouseover(function(e){for(var a,o,i,s=e.target;s!=this;)a=s,s=s.parentNode;void 0!==(o=a._fci)&&(a._fci=void 0,i=n[o],r(i.event,i.element,i),t(e.target).trigger(e)),e.stopPropagation()})}function m(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-D(a,r)))}function y(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-C(a,r)))}function D(t,e){return b(t)+T(t)+(e?w(t):0)}function b(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function w(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function T(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function C(t,e){return E(t)+x(t)+(e?S(t):0)}function E(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function S(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function x(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function k(){}function M(t,e){return t-e}function R(t){return Math.max.apply(Math,t)}function z(t,e){if(t=t||{},void 0!==t[e])return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;a>=0;a--)if(n=t[r[a].toLowerCase()],void 0!==n)return n;return t["default"]}function _(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function H(t){return t.replace(/&.*?;/g,"")}function N(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function A(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function F(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function O(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function W(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]}function L(n,r,a){var o,i,s,l,c=n[0],d=1==n.length&&"string"==typeof c;return e.isMoment(c)?(l=e.apply(null,n),c._ambigTime&&(l._ambigTime=!0),c._ambigZone&&(l._ambigZone=!0)):p(c)||void 0===c?l=e.apply(null,n):(o=!1,i=!1,d?Ye.test(c)?(c+="-01",n=[c],o=!0,i=!0):(s=Ze.exec(c))&&(o=!s[5],i=!0):t.isArray(c)&&(i=!0),l=r?e.utc.apply(e,n):e.apply(null,n),o?(l._ambigTime=!0,l._ambigZone=!0):a&&(i?l._ambigZone=!0:d&&l.zone(c))),new Y(l)}function Y(t){v(this,t)}function Z(t){var e,n=[],r=!1,a=!1;for(e=0;t.length>e;e++)n.push(Ae.moment(t[e])),r=r||n[e]._ambigTime,a=a||n[e]._ambigZone;for(e=0;n.length>e;e++)r?n[e].stripTime():a&&n[e].stripZone();return n}function P(t,n){return e.fn.format.call(t,n)}function B(t,e){return j(t,V(e))}function j(t,e){var n,r="";for(n=0;e.length>n;n++)r+=I(t,e[n]);return r}function I(t,e){var n,r;return"string"==typeof e?e:(n=e.token)?Pe[n]?Pe[n](t):P(t,n):e.maybe&&(r=j(t,e.maybe),r.match(/[1-9]/))?r:""}function q(t,e,n,r,a){var o;return t=Ae.moment.parseZone(t),e=Ae.moment.parseZone(e),o=(t.localeData||t.lang).call(t),n=o.longDateFormat(n)||n,r=r||" - ",$(t,e,V(n),r,a)}function $(t,e,n,r,a){var o,i,s,l,c="",d="",u="",f="",v="";for(i=0;n.length>i&&(o=X(t,e,n[i]),o!==!1);i++)c+=o;for(s=n.length-1;s>i&&(o=X(t,e,n[s]),o!==!1);s--)d=o+d;for(l=i;s>=l;l++)u+=I(t,n[l]),f+=I(e,n[l]);return(u||f)&&(v=a?f+r+u:u+r+f),c+v+d}function X(t,e,n){var r,a;return"string"==typeof n?n:(r=n.token)&&(a=Be[r.charAt(0)],a&&t.isSame(e,a))?P(t,r):!1}function V(t){return t in je?je[t]:je[t]=G(t)}function G(t){for(var e,n=[],r=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=r.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:G(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function U(t,e){function n(t,e){return t.clone().stripTime().add("months",e).startOf("month")}function r(t){a.intervalStart=t.clone().stripTime().startOf("month"),a.intervalEnd=a.intervalStart.clone().add("months",1),a.start=a.intervalStart.clone(),a.start=a.skipHiddenDays(a.start),a.start.startOf("week"),a.start=a.skipHiddenDays(a.start),a.end=a.intervalEnd.clone(),a.end=a.skipHiddenDays(a.end,-1,!0),a.end.add((7-a.end.weekday())%7,"days"),a.end=a.skipHiddenDays(a.end,-1,!0);var n=Math.ceil(a.end.diff(a.start,"weeks",!0));"fixed"==a.opt("weekMode")&&(a.end.add("weeks",6-n),n=6),a.title=e.formatDate(a.intervalStart,a.opt("titleFormat")),a.renderBasic(n,a.getCellsPerWeek(),!0)}var a=this;a.incrementDate=n,a.render=r,a.renderAnnotations=function(){},K.call(a,t,e,"month")}function Q(t,e){function n(t,e){return t.clone().stripTime().add("weeks",e).startOf("week")}function r(t){a.intervalStart=t.clone().stripTime().startOf("week"),a.intervalEnd=a.intervalStart.clone().add("weeks",1),a.start=a.skipHiddenDays(a.intervalStart),a.end=a.skipHiddenDays(a.intervalEnd,-1,!0),a.title=e.formatRange(a.start,a.end.clone().subtract(1),a.opt("titleFormat")," — "),a.renderBasic(1,a.getCellsPerWeek(),!1)}var a=this;a.incrementDate=n,a.render=r,K.call(a,t,e,"basicWeek")}function J(t,e){function n(t,e){var n=t.clone().stripTime().add(e,"days");return n=a.skipHiddenDays(n,0>e?-1:1)}function r(t){a.start=a.intervalStart=t.clone().stripTime(),a.end=a.intervalEnd=a.start.clone().add(1,"days"),a.title=e.formatDate(a.start,a.opt("titleFormat")),a.renderBasic(1,1,!1)}var a=this;a.incrementDate=n,a.render=r,K.call(a,t,e,"basicDay")}function K(e,n,r){function a(t,e,n){G=t,U=e,Q=n,o(),L||i(),s()}function o(){re=ie("theme")?"ui":"fc",ae=ie("columnFormat"),oe=ie("weekNumbers")}function i(){I=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(){var n=l();F&&F.remove(),F=t(n).appendTo(e),O=F.find("thead"),W=O.find(".fc-day-header"),L=F.find("tbody"),Y=L.find("tr"),Z=L.find(".fc-day"),P=Y.find("td:first-child"),B=Y.eq(0).find(".fc-day > div"),j=Y.eq(0).find(".fc-day-content > div"),A(O.add(O.find("tr"))),A(Y),Y.eq(0).addClass("fc-first"),Y.filter(":last").addClass("fc-last"),Z.each(function(e,n){var r=ue(Math.floor(e/U),e%U);se("dayRender",H,r,t(n))}),h(Z)}function l(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+d()+"</table>";return t}function c(){var t,e,n=re+"-widget-header",r="";for(r+="<thead><tr>",oe&&(r+="<th class='fc-week-number "+n+"'>"+_(ie("weekNumberTitle"))+"</th>"),t=0;U>t;t++)e=ue(0,t),r+="<th class='fc-day-header fc-"+Le[e.day()]+" "+n+"'>"+_(he(e,ae))+"</th>";return r+="</tr></thead>"}function d(){var t,e,n,r=re+"-widget-content",a="";for(a+="<tbody>",t=0;G>t;t++){for(a+="<tr class='fc-week'>",oe&&(n=ue(t,0),a+="<td class='fc-week-number "+r+"'>"+"<div>"+_(pe(n))+"</div>"+"</td>"),e=0;U>e;e++)n=ue(t,e),a+=u(n);a+="</tr>"}return a+="</tbody>"}function u(t){var e=H.intervalStart.month(),r=n.getNow().stripTime(),a="",o=re+"-widget-content",i=["fc-day","fc-"+Le[t.day()],o];return t.month()!=e&&i.push("fc-other-month"),t.isSame(r,"day")?i.push("fc-today",re+"-state-highlight"):r>t?i.push("fc-past"):i.push("fc-future"),a+="<td class='"+i.join(" ")+"'"+" data-date='"+t.format()+"'"+">"+"<div>",Q&&(a+="<div class='fc-day-number'>"+t.date()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function f(e){$=e;var n,r,a,o=Math.max($-O.height(),0);"variable"==ie("weekMode")?n=r=Math.floor(o/(1==G?2:6)):(n=Math.floor(o/G),r=o-n*(G-1)),P.each(function(e,o){G>e&&(a=t(o),a.find("> div").css("min-height",(e==G-1?r:n)-C(a)))})}function v(t){q=t,ee.clear(),ne.clear(),V=0,oe&&(V=O.find("th.fc-week-number").outerWidth()),X=Math.floor((q-V)/U),m(W.slice(0,-1),X)}function h(t){t.click(p).mousedown(de)}function p(e){if(!ie("selectable")){var r=n.moment(t(this).data("date"));se("dayClick",this,r,e)}}function g(t,e,n){n&&J.build();for(var r=ve(t,e),a=0;r.length>a;a++){var o=r[a];h(y(o.row,o.leftCol,o.row,o.rightCol))}}function y(t,n,r,a){var o=J.rect(t,n,r,a,e);return le(o,e)}function D(t){return t.clone().stripTime().add(1,"days")}function b(t,e){g(t,e,!0)}function w(){ce()}function T(t,e){var n=fe(t),r=Z[n.row*U+n.col];se("dayClick",r,t,e)}function E(t,e){K.start(function(t){if(ce(),t){var e=ue(t),r=e.clone().add(n.defaultAllDayEventDuration);g(e,r)}},e)}function S(t,e,n){var r=K.stop();ce(),r&&se("drop",t,ue(r),e,n)}function x(t){return ee.left(t)}function k(t){return ee.right(t)}function M(t){return ne.left(t)}function R(t){return ne.right(t)}function z(t){return Y.eq(t)}var H=this;H.renderBasic=a,H.setHeight=f,H.setWidth=v,H.renderDayOverlay=g,H.defaultSelectionEnd=D,H.renderSelection=b,H.clearSelection=w,H.reportDayClick=T,H.dragStart=E,H.dragStop=S,H.getHoverListener=function(){return K},H.colLeft=x,H.colRight=k,H.colContentLeft=M,H.colContentRight=R,H.getIsCellAllDay=function(){return!0},H.allDayRow=z,H.getRowCnt=function(){return G},H.getColCnt=function(){return U},H.getColWidth=function(){return X},H.getDaySegmentContainer=function(){return I},be.call(H,e,n,r),xe.call(H),Se.call(H),te.call(H);var F,O,W,L,Y,Z,P,B,j,I,q,$,X,V,G,U,Q,J,K,ee,ne,re,ae,oe,ie=H.opt,se=H.trigger,le=H.renderOverlay,ce=H.clearOverlays,de=H.daySelectionMousedown,ue=H.cellToDate,fe=H.dateToCell,ve=H.rangeToSegments,he=n.formatDate,pe=n.calculateWeekNumber;N(e.addClass("fc-grid")),J=new ke(function(e,n){var r,a,o;W.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),Y.each(function(n,i){G>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),K=new Me(J),ee=new ze(function(t){return B.eq(t)}),ne=new ze(function(t){return j.eq(t)})}function te(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,we.call(n)}function ee(t,e){function n(t,e){return t.clone().stripTime().add("weeks",e).startOf("week")}function r(t){a.intervalStart=t.clone().stripTime().startOf("week"),a.intervalEnd=a.intervalStart.clone().add("weeks",1),a.start=a.skipHiddenDays(a.intervalStart),a.end=a.skipHiddenDays(a.intervalEnd,-1,!0),a.title=e.formatRange(a.start,a.end.clone().subtract(1),a.opt("titleFormat")," — "),a.renderAgenda(a.getCellsPerWeek())}var a=this;a.incrementDate=n,a.render=r,oe.call(a,t,e,"agendaWeek")}function ne(t,e){function n(t,e){var n=t.clone().stripTime().add(e,"days");return n=a.skipHiddenDays(n,0>e?-1:1)}function r(t){a.start=a.intervalStart=t.clone().stripTime(),a.end=a.intervalEnd=a.start.clone().add(1,"days"),a.title=e.formatDate(a.start,a.opt("titleFormat")),a.renderAgenda(1)}var a=this;a.incrementDate=n,a.render=r,oe.call(a,t,e,"agendaDay")}function re(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function ae(t,e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}function oe(n,r,a){function o(t){Ce=t,i(),X?l():s()}function i(){Ae=Pe("theme")?"ui":"fc",Fe=Pe("isRTL"),Ye=Pe("columnFormat"),Oe=e.duration(Pe("minTime")),We=e.duration(Pe("maxTime")),me=e.duration(Pe("slotDuration")),De=Pe("snapDuration"),De=De?e.duration(De):me}function s(){var r,a,o,i,s=Ae+"-widget-header",c=Ae+"-widget-content",d=0===me.asMinutes()%15;for(l(),ne=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Pe("allDaySlot")?(re=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ne),r="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+(Pe("allDayHTML")||_(Pe("allDayText")))+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ae=t(r).appendTo(ne),oe=ae.find("tr"),g(oe.find("td")),ne.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):re=t([]),se=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ne),le=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(se),ce=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(le),Ze=t("<div class='slot-segment-container' style='position:absolute;z-index:-1;top:0;left:0'/>").appendTo(le),r="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=e.duration(+Oe),Ee=0;We>a;)o=$.start.clone().time(a),i=o.minutes(),r+="<tr class='fc-slot"+Ee+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(d&&i?"&nbsp;":_(Je(o,Pe("axisFormat"))))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",a.add(me),Ee++;r+="</tbody></table>",de=t(r).appendTo(le),D(de.find("td"))}function l(){var e=c();X&&X.remove(),X=t(e).appendTo(n),V=X.find("thead"),G=V.find("th").slice(1,-1),U=X.find("tbody"),Q=U.find("td").slice(0,-1),J=Q.find("> div"),K=Q.find(".fc-day-content > div"),te=Q.eq(0),ee=J.eq(0),A(V.add(V.find("tr"))),A(U.add(U.find("tr")))}function c(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+d()+u()+"</table>";return t}function d(){var t,e,n,r=Ae+"-widget-header",a="";for(a+="<thead><tr>",Pe("weekNumbers")?(t=Ge(0,0),e=Ke(t),Fe?e+=Pe("weekNumberTitle"):e=Pe("weekNumberTitle")+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+_(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Ce>n;n++)t=Ge(0,n),a+="<th class='fc-"+Le[t.day()]+" fc-col"+n+" "+r+"'>"+_(Je(t,Ye))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function u(){var t,e,n,a,o,i=Ae+"-widget-header",s=Ae+"-widget-content",l=r.getNow().stripTime(),c="";for(c+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",e=0;Ce>e;e++)t=Ge(0,e),o=["fc-col"+e,"fc-"+Le[t.day()],s],t.isSame(l,"day")?o.push(Ae+"-state-highlight","fc-today"):l>t?o.push("fc-past"):o.push("fc-future"),a="<td class='"+o.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=a;return c+=n,c+="<td class='fc-agenda-gutter "+s+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function f(t){void 0===t&&(t=ve),ve=t,tn={};var e=U.position().top,n=se.position().top,r=Math.min(t-e,de.height()+n+1);ee.height(r-C(te)),ne.css("top",e),se.height(r-n-1);var a=de.find("tr:first").height()+1,o=de.find("tr:eq(1)").height();ye=(a+o)/2,we=me/De,Te=ye/we}function v(e){fe=e,He.clear(),Ne.clear();var n=V.find("th:first");ae&&(n=n.add(ae.find("th:first"))),n=n.add(de.find("th:first")),he=0,m(n.width("").each(function(e,n){he=Math.max(he,t(n).outerWidth())}),he);var r=X.find(".fc-agenda-gutter");ae&&(r=r.add(ae.find("th.fc-agenda-gutter")));var a=se[0].clientWidth;ge=se.width()-a,ge?(m(r,ge),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),pe=Math.floor((a-he)/Ce),m(G.slice(0,-1),pe)}function h(){function t(){se.scrollTop(n)}var n=W(e.duration(Pe("scrollTime")))+1;t(),setTimeout(t,0)}function p(){h()}function g(t){t.click(b).mousedown(Xe)}function D(t){t.click(b).mousedown(B)}function b(t){if(!Pe("selectable")){var e=Math.min(Ce-1,Math.floor((t.pageX-X.offset().left-he)/pe)),n=Ge(0,e),a=this.parentNode.className.match(/fc-slot(\d+)/);if(a){var o=parseInt(a[1],10);n.add(Oe+o*me),n=r.rezoneDate(n),Be("dayClick",Q[e],n,t)}else Be("dayClick",Q[e],n,t)}}function w(t,e,n){n&&Re.build();for(var r=Qe(t,e),a=0;r.length>a;a++){var o=r[a];g(T(o.row,o.leftCol,o.row,o.rightCol))}}function T(t,e,n,r){var a=Re.rect(t,e,n,r,ne);return je(a,ne)}function E(t,e){t=t.clone().stripZone(),e=e.clone().stripZone();for(var n=0;Ce>n;n++){var r=Ge(0,n),a=r.clone().add(1,"days"),o=t>r?t:r,i=e>a?a:e;if(i>o){var s=Re.rect(0,n,0,n,le),l=O(o,r),c=O(i,r);s.top=l,s.height=c-l,D(je(s,le))}}}function S(t){for(var n="",r=0;t.length>r;r++){var a=t[r],o=W(e.duration(a.start)),i=W(e.duration(a.end)),s=i-o,l=0,c=k(l)-2,d=z(l)+3,u=d-c,f="";
a.cls&&(f=" "+a.cls);var v="";a.color&&(v="color:"+a.color+";"),a.background&&(v+="background:"+a.background+";");var h=a.title||"";n+='<div style="position: absolute; top: '+o+"px; "+"left: "+c+"px; "+"width: "+u+"px; "+"height: "+s+"px;"+v+'" '+'class="fc-annotation fc-annotation-skin'+f+'">'+h+"</div>"}Ze[0].innerHTML=n}function x(t){return He.left(t)}function k(t){return Ne.left(t)}function R(t){return He.right(t)}function z(t){return Ne.right(t)}function H(t){return Pe("allDaySlot")&&!t.row}function F(t){var n=Ge(0,t.col),a=t.row;return Pe("allDaySlot")&&a--,a>=0&&(n.time(e.duration(Oe+a*De)),n=r.rezoneDate(n)),n}function O(t,n){return W(e.duration(t.clone().stripZone()-n.clone().stripTime()))}function W(t){if(Oe>t)return 0;if(t>=We)return de.height();var e=(t-Oe)/me,n=Math.floor(e),r=e-n,a=tn[n];void 0===a&&(a=tn[n]=de.find("tr").eq(n).find("td div")[0].offsetTop);var o=a-1+r*ye;return o=Math.max(o,0)}function L(t){return t.hasTime()?t.clone().add(me):t.clone().add(1,"days")}function Y(t,e){t.hasTime()||e.hasTime()?Z(t,e):Pe("allDaySlot")&&w(t,e,!0)}function Z(e,n){var r=Pe("selectHelper");if(Re.build(),r){var a=Ue(e).col;if(a>=0&&Ce>a){var o=Re.rect(0,a,0,a,le),i=O(e,e),s=O(n,e);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",ue=t(l).css(o).appendTo(le))}else o.isStart=!0,o.isEnd=!0,ue=t(Ve({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),ue.css("opacity",Pe("dragOpacity"));ue&&(D(ue),le.append(ue),m(ue,o.width,!0),y(ue,o.height,!0))}}}else E(e,n)}function P(){Ie(),ue&&(ue.remove(),ue=null)}function B(e){if(1==e.which&&Pe("selectable")){$e(e);var n;_e.start(function(t,e){if(P(),t&&t.col==e.col&&!H(t)){var r=F(e),a=F(t);n=[r,r.clone().add(De),a,a.clone().add(De)].sort(M),Z(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){_e.stop(),n&&(+n[0]==+n[1]&&j(n[0],t),qe(n[0],n[3],t))})}}function j(t,e){Be("dayClick",Q[Ue(t).col],t,e)}function I(t,e){_e.start(function(t){if(Ie(),t){var e=F(t),n=e.clone();e.hasTime()?(n.add(r.defaultTimedEventDuration),E(e,n)):(n.add(r.defaultAllDayEventDuration),w(e,n))}},e)}function q(t,e,n){var r=_e.stop();Ie(),r&&Be("drop",t,F(r),e,n)}var $=this;$.renderAgenda=o,$.setWidth=v,$.setHeight=f,$.afterRender=p,$.computeDateTop=O,$.getIsCellAllDay=H,$.allDayRow=function(){return oe},$.getCoordinateGrid=function(){return Re},$.getHoverListener=function(){return _e},$.colLeft=x,$.colRight=R,$.colContentLeft=k,$.colContentRight=z,$.getDaySegmentContainer=function(){return re},$.getSlotSegmentContainer=function(){return ce},$.getAnnotationSegmentContainer=function(){return Ze},$.getSlotContainer=function(){return le},$.getRowCnt=function(){return 1},$.getColCnt=function(){return Ce},$.getColWidth=function(){return pe},$.getSnapHeight=function(){return Te},$.getSnapDuration=function(){return De},$.getSlotHeight=function(){return ye},$.getSlotDuration=function(){return me},$.getMinTime=function(){return Oe},$.getMaxTime=function(){return We},$.defaultSelectionEnd=L,$.renderDayOverlay=w,$.renderSelection=Y,$.clearSelection=P,$.reportDayClick=j,$.dragStart=I,$.dragStop=q,$.renderAnnotations=S,be.call($,n,r,a),xe.call($),Se.call($),ie.call($);var X,V,G,U,Q,J,K,te,ee,ne,re,ae,oe,se,le,ce,de,ue,fe,ve,he,pe,ge,me,ye,De,we,Te,Ce,Ee,Re,_e,He,Ne,Ae,Fe,Oe,We,Ye,Ze,Pe=$.opt,Be=$.trigger,je=$.renderOverlay,Ie=$.clearOverlays,qe=$.reportSelection,$e=$.unselect,Xe=$.daySelectionMousedown,Ve=$.slotSegHtml,Ge=$.cellToDate,Ue=$.dateToCell,Qe=$.rangeToSegments,Je=r.formatDate,Ke=r.calculateWeekNumber,tn={};N(n.addClass("fc-agenda")),Re=new ke(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;G.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Pe("allDaySlot")&&(a=oe,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=le.offset().top,l=se.offset().top,c=l+se.outerHeight(),d=0;Ee*we>d;d++)e.push([r(s+Te*d),r(s+Te*(d+1))])}),_e=new Me(Re),He=new ze(function(t){return J.eq(t)}),Ne=new ze(function(t){return K.eq(t)})}function ie(){function n(t,e){var n,r=t.length,o=[],s=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):s.push(t[n]);v("allDaySlot")&&(X(o,e),w()),i(a(s),e)}function r(){T().empty(),E().empty()}function a(t){var e,n,r,a,i,s=H(),l=V(),c=G(),d=[];for(n=0;s>n;n++)for(e=z(0,n),i=o(t,e.clone().time(l),e.clone().time(c)),i=se(i),r=0;i.length>r;r++)a=i[r],a.col=n,d.push(a);return d}function o(t,e,n){e=e.clone().stripZone(),n=n.clone().stripZone();var r,a,o,i,s,l,c,d,u=[],f=t.length;for(r=0;f>r;r++)a=t[r],o=a.start.clone().stripZone(),i=J(a).stripZone(),i>e&&n>o&&(e>o?(s=e.clone(),c=!1):(s=o,c=!0),i>n?(l=n.clone(),d=!1):(l=i,d=!0),u.push({event:a,start:s,end:l,isStart:c,isEnd:d}));return u.sort(ge)}function i(e,n){var r,a,o,i,c,d,u,f,p,m,y,b,w,T,S,k,z=e.length,_="",H=E(),N=v("isRTL");for(r=0;z>r;r++)a=e[r],o=a.event,i=x(a.start,a.start),c=x(a.end,a.start),d=M(a.col),u=R(a.col),f=u-d,u-=.025*f,f=u-d,p=f*(a.forwardCoord-a.backwardCoord),v("slotEventOverlap")&&(p=Math.max(2*(p-10),p)),N?(y=u-a.backwardCoord*f,m=y-p):(m=d+a.backwardCoord*f,y=m+p),m=Math.max(m,d),y=Math.min(y,u),p=y-m,a.top=i,a.left=m,a.outerWidth=p,a.outerHeight=c-i,_+=s(o,a);for(H[0].innerHTML=_,b=H.children(),r=0;z>r;r++)a=e[r],o=a.event,w=t(b[r]),T=h("eventRender",o,o,w),T===!1?w.remove():(T&&T!==!0&&(w.remove(),w=t(T).css({position:"absolute",top:a.top,left:a.left}).appendTo(H)),a.element=w,o._id===n?l(o,w,a):w[0]._fci=r,Z(o,w));for(g(H,e,l),r=0;z>r;r++)a=e[r],(w=a.element)&&(a.vsides=C(w,!0),a.hsides=D(w,!0),S=w.find(".fc-event-title"),S.length&&(a.contentTop=S[0].offsetTop));for(r=0;z>r;r++)a=e[r],(w=a.element)&&(w[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",k=Math.max(0,a.outerHeight-a.vsides),w[0].style.height=k+"px",o=a.event,void 0!==a.contentTop&&10>k-a.contentTop&&(w.find("div.fc-event-time").text(Q(o.start,v("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),h("eventAfterRender",o,o,w))}function s(t,e){var n="<",r=t.url,a=F(t,v),o=["fc-event","fc-event-vert"];return p(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+_(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+_(f.getEventTimeText(t))+"</div>"+"<div class='fc-event-title'>"+_(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&m(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function l(t,e,n){var r=e.find("div.fc-event-time");p(t)&&d(t,e,r),n.isEnd&&m(t)&&u(t,e,r),b(t,e)}function c(t,n,r){function a(){c||(n.width(o).height("").draggable("option","grid",null),c=!0)}var o,i,s,l=r.isStart,c=!0,d=S(),u=N(),f=V(),p=L(),g=W(),m=O(),D=A();n.draggable({opacity:v("dragOpacity","month"),revertDuration:v("dragRevertDuration"),start:function(e,r){h("eventDragStart",n[0],t,e,r),B(t,n),o=n.width(),d.start(function(e,r){if($(),e){i=!1;var o=z(0,r.col),d=z(0,e.col);s=d.diff(o,"days"),e.row?l?c&&(n.width(u-10),y(n,U.defaultTimedEventDuration/p*g),n.draggable("option","grid",[u,1]),c=!1):i=!0:(q(t.start.clone().add(s,"days"),J(t).add(s,"days")),a()),i=i||c&&!s}else a(),i=!0;n.draggable("option","revert",i)},e,"drag")},stop:function(r,o){if(d.stop(),$(),h("eventDragStop",n[0],t,r,o),i)a(),n.css("filter",""),P(t,n);else{var l,u,v=t.start.clone().add(s,"days");c||(u=Math.round((n.offset().top-Y().offset().top)/D),l=e.duration(f+u*m),v=U.rezoneDate(v.clone().time(l))),j(n[0],t,v,r,o)}}})}function d(t,e,n){function r(){$(),s&&(c?(n.hide(),e.draggable("option","grid",null),q(D,b)):(a(),n.css("display",""),e.draggable("option","grid",[C,E])))}function a(){D&&n.text(f.getEventTimeText(D,t.end?b:null))}var o,i,s,l,c,d,u,p,g,m,y,D,b,w=f.getCoordinateGrid(),T=H(),C=N(),E=A(),S=O();e.draggable({scroll:!1,grid:[C,E],axis:1==T?"y":!1,opacity:v("dragOpacity"),revertDuration:v("dragRevertDuration"),start:function(n,r){h("eventDragStart",e[0],t,n,r),B(t,e),w.build(),o=e.position(),i=w.cell(n.pageX,n.pageY),s=l=!0,c=d=k(i),u=p=0,g=0,m=y=0,D=null,b=null},drag:function(n,a){var f=w.cell(n.pageX,n.pageY);if(s=!!f){if(c=k(f),u=Math.round((a.position.left-o.left)/C),u!=p){var v=z(0,i.col),h=i.col+u;h=Math.max(0,h),h=Math.min(T-1,h);var x=z(0,h);g=x.diff(v,"days")}c||(m=Math.round((a.position.top-o.top)/E))}(s!=l||c!=d||u!=p||m!=y)&&(c?(D=t.start.clone().stripTime().add(g,"days"),b=D.clone().add(U.defaultAllDayEventDuration)):(D=t.start.clone().add(m*S).add(g,"days"),b=J(t).add(m*S).add(g,"days")),r(),l=s,d=c,p=u,y=m),e.draggable("option","revert",!s)},stop:function(n,a){$(),h("eventDragStop",e[0],t,n,a),s&&(c||g||m)?j(e[0],t,D,n,a):(s=!0,c=!1,u=0,g=0,m=0,r(),e.css("filter",""),e.css(o),P(t,e))}})}function u(t,e,n){var r,a,o,i=A(),s=O();e.resizable({handles:{s:".ui-resizable-handle"},grid:i,start:function(n,o){r=a=0,B(t,e),h("eventResizeStart",e[0],t,n,o)},resize:function(l,c){if(r=Math.round((Math.max(i,e.height())-c.originalSize.height)/i),r!=a){o=J(t).add(s*r);var d;d=r?f.getEventTimeText(t.start,o):f.getEventTimeText(t),n.text(d),a=r}},stop:function(n,a){h("eventResizeStop",e[0],t,n,a),r?I(e[0],t,o,n,a):P(t,e)}})}var f=this;f.renderEvents=n,f.clearEvents=r,f.slotSegHtml=s,we.call(f);var v=f.opt,h=f.trigger,p=f.isEventDraggable,m=f.isEventResizable,b=f.eventElementHandlers,w=f.setHeight,T=f.getDaySegmentContainer,E=f.getSlotSegmentContainer,S=f.getHoverListener,x=f.computeDateTop,k=f.getIsCellAllDay,M=f.colContentLeft,R=f.colContentRight,z=f.cellToDate,H=f.getColCnt,N=f.getColWidth,A=f.getSnapHeight,O=f.getSnapDuration,W=f.getSlotHeight,L=f.getSlotDuration,Y=f.getSlotContainer,Z=f.reportEventElement,P=f.showEvents,B=f.hideEvents,j=f.eventDrop,I=f.eventResize,q=f.renderDayOverlay,$=f.clearOverlays,X=f.renderDayEvents,V=f.getMinTime,G=f.getMaxTime,U=f.calendar,Q=U.formatDate,J=U.getEventEnd;f.draggableDayEvent=c}function se(t){var e,n=le(t),r=n[0];if(ce(n),r){for(e=0;r.length>e;e++)de(r[e]);for(e=0;r.length>e;e++)ue(r[e],0,0)}return fe(n)}function le(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&ve(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function ce(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for(a=n[r],a.forwardSegs=[],o=e+1;t.length>o;o++)ve(a,t[o],a.forwardSegs)}function de(t){var e,n,r=t.forwardSegs,a=0;if(void 0===t.forwardPressure){for(e=0;r.length>e;e++)n=r[e],de(n),a=Math.max(a,1+n.forwardPressure);t.forwardPressure=a}}function ue(t,e,n){var r,a=t.forwardSegs;if(void 0===t.forwardCoord)for(a.length?(a.sort(pe),ue(a[0],e+1,n),t.forwardCoord=a[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),r=0;a.length>r;r++)ue(a[r],0,t.forwardCoord)}function fe(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}function ve(t,e,n){n=n||[];for(var r=0;e.length>r;r++)he(t,e[r])&&n.push(e[r]);return n}function he(t,e){return t.end>e.start&&t.start<e.end}function pe(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ge(t,e)}function ge(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function me(t,e){function n(t,e){var n=t.clone().stripTime().add(e,"days");return n=a.skipHiddenDays(n,0>e?-1:1)}function r(t){a.start=a.intervalStart=t.clone().stripTime(),a.end=a.intervalEnd=a.start.clone().add(1,"days"),a.title=e.formatDate(a.start,a.opt("titleFormat")),a.renderResource(o().length)}var a=this;a.incrementDate=n,a.render=r,ye.call(a,t,e,"resourceDay");var o=a.getResources}function ye(n,r,a){function o(t){He=t,i(),Q?l():s()}function i(){Ye=qe("theme")?"ui":"fc",Ze=qe("isRTL"),je=qe("columnFormat"),Pe=e.duration(qe("minTime")),Be=e.duration(qe("maxTime")),Te=e.duration(qe("slotDuration")),Ee=qe("snapDuration"),Ee=Ee?e.duration(Ee):Te}function s(){var r,a,o,i,s=Ye+"-widget-header",c=Ye+"-widget-content",d=0===Te.asMinutes()%15;for(l(),ie=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),qe("allDaySlot")?(se=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ie),r="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+(qe("allDayHTML")||_(qe("allDayText")))+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",le=t(r).appendTo(ie),ce=le.find("tr"),g(ce.find("td")),ie.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):se=t([]),de=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ie),ue=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(de),fe=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ue),Ie=t("<div class='slot-segment-container' style='position:absolute;z-index:-1;top:0;left:0'/>").appendTo(ue),r="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=e.duration(+Pe),Ne=0;Be>a;)o=U.start.clone().time(a),i=o.minutes(),r+="<tr class='fc-slot"+Ne+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(d&&i?"&nbsp;":_(en(o,qe("axisFormat"))))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",a.add(Te),Ne++;r+="</tbody></table>",ve=t(r).appendTo(ue),D(ve.find("td"))}function l(){var e=c();Q&&Q.remove(),Q=t(e).appendTo(n),J=Q.find("thead"),K=J.find("th").slice(1,-1),te=Q.find("tbody"),ee=te.find("td").slice(0,-1),ne=ee.find("> div"),re=ee.find(".fc-day-content > div"),ae=ee.eq(0),oe=ne.eq(0),A(J.add(J.find("tr"))),A(te.add(te.find("tr")))}function c(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+d()+u()+"</table>";return t}function d(){var t,e,n,r=Ye+"-widget-header",a="";for(a+="<thead><tr>",qe("weekNumbers")?(t=Je(0,0),e=nn(t),Ze?e+=qe("weekNumberTitle"):e=qe("weekNumberTitle")+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+_(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;He>n;n++){var o=on()[n],i=["fc-col"+n,o.className,r,"resource-id"+o.id];a+="<th class='"+i.join(" ")+"'>"+_(o.name)+"</th>"}return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function u(){var t,e,n,a,o,i=Ye+"-widget-header",s=Ye+"-widget-content",l=r.getNow().stripTime(),c="";for(c+="<tbody><tr><th class='fc-agenda-axis "+i+"'>&nbsp;</th>",n="",e=0;(He||1)>e;e++){var d=on()[e];t=U.intervalStart.clone(),o=["fc-col"+e,"fc-"+Le[t.day()],s],d&&d.className&&o.push(d.className),t.isSame(l,"day")?o.push(Ye+"-state-highlight","fc-today"):l>t?o.push("fc-past"):o.push("fc-future"),a="<td class='"+o.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=a}return c+=n,c+="<td class='fc-agenda-gutter "+s+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function f(t){void 0===t&&(t=ge),ge=t,an={};var e=te.position().top,n=de.position().top,r=Math.min(t-e,ve.height()+n+1);oe.height(r-C(ae)),ie.css("top",e),de.height(r-n-1);var a=ve.find("tr:first").height()+1,o=ve.find("tr:eq(1)").height();Ce=(a+o)/2,Re=Te/Ee,_e=Ce/Re}function v(e){pe=e,Oe.clear(),We.clear();var n=J.find("th:first");le&&(n=n.add(le.find("th:first"))),n=n.add(ve.find("th:first")),me=0,m(n.width("").each(function(e,n){me=Math.max(me,t(n).outerWidth())}),me);var r=Q.find(".fc-agenda-gutter");le&&(r=r.add(le.find("th.fc-agenda-gutter")));var a=de[0].clientWidth;we=de.width()-a,we?(m(r,we),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),ye=Math.floor((a-me)/He),m(K.slice(0,-1),ye)}function h(){function t(){de.scrollTop(n)}var n=L(e.duration(qe("scrollTime")))+1;t(),setTimeout(t,0)}function p(){h()}function g(t){t.click(b).mousedown(G)}function D(t){t.click(b).mousedown(j)}function b(t){if(!qe("selectable")){var e=Math.min(He-1,Math.floor((t.pageX-Q.offset().left-me)/ye)),n=Je(0,0),a=this.parentNode.className.match(/fc-slot(\d+)/);if(t.data=on()[e],a){var o=parseInt(a[1],10);n.add(Pe+o*Te),n=r.rezoneDate(n),$e("dayClick",ee[e],n,t)}else $e("dayClick",ee[e],n,t)}}function w(t,e,n,r){n&&Ae.build();for(var a=tn(t,e),o=0;a.length>o;o++){var i=a[o];g(T(i.row,r,i.row,r))}}function T(t,e,n,r){var a=Ae.rect(t,e,n,r,ie);return Xe(a,ie)}function E(t,e,n){t=t.clone().stripZone(),e=e.clone().stripZone();var r=Je(0,0),a=r.clone().add(1,"days"),o=t>r?t:r,i=e>a?a:e;if(i>o){var s=Ae.rect(0,n,0,n,ue),l=W(o,r),c=W(i,r);s.top=l,s.height=c-l,D(Xe(s,ue))}}function S(t){for(var n="",r=0;t.length>r;r++){var a=t[r];if(a.resources instanceof Array)for(var o=0;a.resources.length>o;o++){var i=a.resources[o],s=x(i);if(void 0!==s){var l=L(e.duration(a.start)),c=L(e.duration(a.end)),d=c-l,u=R(s)-2,f=H(s)+3,v=f-u,h="";a.cls&&(h=" "+a.cls);var p="";a.color&&(p="color:"+a.color+";"),a.background&&(p+="background:"+a.background+";");var g=a.title||"";n+='<div style="position: absolute; top: '+l+"px; "+"left: "+u+"px; "+"width: "+v+"px; "+"height: "+d+"px;"+p+'" '+'class="fc-annotation fc-annotation-skin'+h+'">'+g+"</div>"}}}Ie[0].innerHTML=n}function x(t){for(var e=U.getResources,n=e(),r=0;n.length>r;r++)if(t==n[r].id)return r}function k(t){return Oe.left(t)}function R(t){return We.left(t)}function z(t){return Oe.right(t)}function H(t){return We.right(t)}function F(t){return qe("allDaySlot")&&!t.row}function O(t){var n=Je(0,0),a=t.row;return qe("allDaySlot")&&a--,a>=0&&(n.time(e.duration(Pe+a*Ee)),n=r.rezoneDate(n)),n}function W(t,n){return L(e.duration(t.clone().stripZone()-n.clone().stripTime()))}function L(t){if(Pe>t)return 0;if(t>=Be)return ve.height();var e=(t-Pe)/Te,n=Math.floor(e),r=e-n,a=an[n];void 0===a&&(a=an[n]=ve.find("tr").eq(n).find("td div")[0].offsetTop);var o=a-1+r*Ce;return o=Math.max(o,0)}function Y(t){return t.hasTime()?t.clone().add(Te):t.clone().add(1,"days")}function Z(t,e,n){t.hasTime()||e.hasTime()?P(t,e):qe("allDaySlot")&&w(t,e,!0,n)}function P(e,n,r){var a=qe("selectHelper");if(Ae.build(),a){if(r=r||Ke(e).col,r>=0&&He>r){var o=Ae.rect(0,r,0,r,ue),i=W(e,e),s=W(n,e);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(a)){var l=a(e,n);l&&(o.position="absolute",he=t(l).css(o).appendTo(ue))}else o.isStart=!0,o.isEnd=!0,he=t(Qe({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),he.css("opacity",qe("dragOpacity"));he&&(D(he),ue.append(he),m(he,o.width,!0),y(he,o.height,!0))}}}else E(e,n,r)}function B(){Ve(),he&&(he.remove(),he=null)}function j(e){if(1==e.which&&qe("selectable")){Ue(e);var n,r;Fe.start(function(t,e){if(B(),t&&t.col==e.col&&!F(t)){r=t.col;var a=O(e),o=O(t);n=[a,a.clone().add(Ee),o,o.clone().add(Ee)].sort(M),P(n[0],n[3],t.col)}else n=null},e),t(document).one("mouseup",function(t){Fe.stop(),n&&(+n[0]==+n[1]&&I(n[0],t),t.data=on()[r],Ge(n[0],n[3],t))})}}function I(t,e){$e("dayClick",ee[Ke(t).col],t,e)}function q(t,e,n,a,o,i){var s=r.mutateResourceEvent(e,n,a,null);$e("eventDrop",t,e,s.dateDelta,function(){s.undo(),rn(e._id)},o,i),rn(e._id)}function $(t,e,n,a,o){var i=r.mutateResourceEvent(e,e.resources,null,n);$e("eventResize",t,e,i.durationDelta,function(){i.undo(),rn(e._id)},a,o),rn(e._id)}function X(t,e){Fe.start(function(t){if(Ve(),t){var e=O(t),n=e.clone();e.hasTime()?(n.add(r.defaultTimedEventDuration),E(e,n,t.col)):(n.add(r.defaultAllDayEventDuration),w(e,n,!0,t.col))}},e)}function V(t,e,n){var r=Fe.stop();Ve(),r&&(e.data=on()[r.col],$e("drop",t,O(r),e,n))}function G(e){var n,r=U.getIsCellAllDay,a=U.getHoverListener(),o=U.reportDayClick;if(1==e.which&&qe("selectable")){Ue(e);var i;a.start(function(t,e){B(),t&&r(t)?(n=t.col,i=[O(e),O(t)].sort(M),Z(i[0],i[1],n)):i=null},e),t(document).one("mouseup",function(t){a.stop(),i&&(+i[0]==+i[1]&&o(i[0],!0,t),t.data=on()[n],Ge(i[0],i[1],t))})}}var U=this;U.renderResource=o,U.setWidth=v,U.setHeight=f,U.afterRender=p,U.computeDateTop=W,U.getIsCellAllDay=F,U.allDayRow=function(){return ce},U.getCoordinateGrid=function(){return Ae},U.getHoverListener=function(){return Fe},U.colLeft=k,U.colRight=z,U.colContentLeft=R,U.colContentRight=H,U.getDaySegmentContainer=function(){return se},U.getSlotSegmentContainer=function(){return fe},U.getAnnotationSegmentContainer=function(){return Ie},U.getSlotContainer=function(){return ue},U.getRowCnt=function(){return 1},U.getColCnt=function(){return 1},U.getColWidth=function(){return ye},U.getSnapHeight=function(){return _e},U.getSnapDuration=function(){return Ee},U.getSlotHeight=function(){return Ce},U.getSlotDuration=function(){return Te},U.getMinTime=function(){return Pe},U.getMaxTime=function(){return Be},U.defaultSelectionEnd=Y,U.renderDayOverlay=w,U.renderSelection=Z,U.clearSelection=B,U.reportDayClick=I,U.dragStart=X,U.dragStop=V,U.getResources=r.fetchResources,U.renderAnnotations=S,be.call(U,n,r,a),U.eventDrop=q,U.eventResize=$,xe.call(U),Se.call(U),De.call(U);var Q,J,K,te,ee,ne,re,ae,oe,ie,se,le,ce,de,ue,fe,ve,he,pe,ge,me,ye,we,Te,Ce,Ee,Re,_e,He,Ne,Ae,Fe,Oe,We,Ye,Ze,Pe,Be,je,Ie,qe=U.opt,$e=U.trigger,Xe=U.renderOverlay,Ve=U.clearOverlays,Ge=U.reportSelection,Ue=U.unselect,Qe=U.slotSegHtml,Je=U.cellToDate,Ke=U.dateToCell,tn=U.rangeToSegments,en=r.formatDate,nn=r.calculateWeekNumber,rn=r.reportEventChange,an={},on=U.getResources;N(n.addClass("fc-agenda")),Ae=new ke(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;K.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),qe("allDaySlot")&&(a=ce,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=ue.offset().top,l=de.offset().top,c=l+de.outerHeight(),d=0;Ne*Re>d;d++)e.push([r(s+_e*d),r(s+_e*(d+1))])}),Fe=new Me(Ae),Oe=new ze(function(t){return ne.eq(t)}),We=new ze(function(t){return re.eq(t)})}function De(){function n(t,e){var n,r=t.length,o=[],i=[];for(n=0;r>n;n++)t[n].allDay?o.push(t[n]):i.push(t[n]);h("allDaySlot")&&(V(o,e),T()),s(a(i),e)}function r(){E().empty(),S().empty()}function a(t){var e,n,r,a,s,l=N(),c=G(),d=U(),u=[];for(n=0;l>n;n++){e=H(0,0);var f=i(te()[n],t);for(s=o(f,e.clone().time(c),e.clone().time(d)),s=se(s),r=0;s.length>r;r++)a=s[r],a.col=n,u.push(a)}return u}function o(t,e,n){e=e.clone().stripZone(),n=n.clone().stripZone();var r,a,o,i,s,l,c,d,u=[],f=t.length;for(r=0;f>r;r++)a=t[r],o=a.start.clone().stripZone(),i=K(a).stripZone(),i>e&&n>o&&(e>o?(s=e.clone(),c=!1):(s=o,c=!0),i>n?(l=n.clone(),d=!1):(l=i,d=!0),u.push({event:a,start:s,end:l,isStart:c,isEnd:d}));return u.sort(ge)}function i(e,n){for(var r=[],a=function(n){return n.resources&&t.grep(n.resources,function(t){return t==e.id}).length},o=0;n.length>o;o++)a(n[o])&&r.push(n[o]);return r}function s(e,n){var r,a,o,i,s,d,u,f,v,m,y,b,w,T,E,x,M=e.length,_="",H=S(),N=h("isRTL");for(r=0;M>r;r++)a=e[r],o=a.event,i=k(a.start,a.start),s=k(a.end,a.start),d=R(a.col),u=z(a.col),f=u-d,u-=.025*f,f=u-d,v=f*(a.forwardCoord-a.backwardCoord),h("slotEventOverlap")&&(v=Math.max(2*(v-10),v)),N?(y=u-a.backwardCoord*f,m=y-v):(m=d+a.backwardCoord*f,y=m+v),m=Math.max(m,d),y=Math.min(y,u),v=y-m,a.top=i,a.left=m,a.outerWidth=v,a.outerHeight=s-i,_+=l(o,a);for(H[0].innerHTML=_,b=H.children(),r=0;M>r;r++)a=e[r],o=a.event,w=t(b[r]),T=p("eventRender",o,o,w),T===!1?w.remove():(T&&T!==!0&&(w.remove(),w=t(T).css({position:"absolute",top:a.top,left:a.left}).appendTo(H)),a.element=w,o._id===n?c(o,w,a):w[0]._fci=r,P(o,w));for(g(H,e,c),r=0;M>r;r++)a=e[r],(w=a.element)&&(a.vsides=C(w,!0),a.hsides=D(w,!0),E=w.find(".fc-event-title"),E.length&&(a.contentTop=E[0].offsetTop));for(r=0;M>r;r++)a=e[r],(w=a.element)&&(w[0].style.width=Math.max(0,a.outerWidth-a.hsides)+"px",x=Math.max(0,a.outerHeight-a.vsides),w[0].style.height=x+"px",o=a.event,void 0!==a.contentTop&&10>x-a.contentTop&&(w.find("div.fc-event-time").text(J(o.start,h("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),p("eventAfterRender",o,o,w))}function l(t,e){var n="<",r=t.url,a=F(t,h),o=["fc-event","fc-event-vert"];return m(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+_(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+_(v.getEventTimeText(t))+"</div>"+"<div class='fc-event-title'>"+_(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&b(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function c(t,e,n){var r=e.find("div.fc-event-time");m(t)&&u(t,e,r),n.isEnd&&b(t)&&f(t,e,r),w(t,e)}function d(t,n,r){function a(){d||(n.width(o).height("").draggable("option","grid",null),d=!0)}var o,i,s,l,c=r.isStart,d=!0,u=x(),f=A(),v=G(),g=Y(),m=L(),D=W(),b=O();n.draggable({opacity:h("dragOpacity","month"),revertDuration:h("dragRevertDuration"),start:function(e,r){p("eventDragStart",n[0],t,e,r),j(t,n),o=n.width(),u.start(function(e,r){if(X(),e){i=!1,l=r.col;var o=H(0,r.col),u=H(0,e.col);s=u.diff(o,"days"),e.row?c?d&&(n.width(f-10),y(n,Q.defaultTimedEventDuration/g*m),n.draggable("option","grid",[f,1]),d=!1):i=!0:($(t.start.clone().add(s,"days"),K(t).add(s,"days"),!0,1),a()),i=i||d&&!s}else a(),i=!0;n.draggable("option","revert",i)},e,"drag")},stop:function(r,o){if(u.stop(),X(),p("eventDragStop",n[0],t,r,o),i)a(),n.css("filter",""),B(t,n);else{var s=Math.round((n.offset().left-Z().offset().left)/f),c=t.resources;s!==l&&(c=[te()[s].id]);var h,g,m=t.start.clone();d||(g=Math.round((n.offset().top-Z().offset().top)/b),h=e.duration(v+g*D),m=Q.rezoneDate(m.clone().time(h))),I(n[0],t,c,m,r,o)}}})}function u(t,e,n){function r(){X(),s&&(c?(n.hide(),e.draggable("option","grid",null),$(b,w,!1,i.col+u)):(a(),n.css("display",""),e.draggable("option","grid",[E,S])))}function a(){b&&n.text(v.getEventTimeText(b,t.end?w:null))}var o,i,s,l,c,d,u,f,g,m,y,D,b,w,T=v.getCoordinateGrid(),C=N(),E=A(),S=O(),x=W();e.draggable({scroll:!1,grid:[E,S],axis:1==C?"y":!1,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(n,r){p("eventDragStart",e[0],t,n,r),j(t,e),T.build(),o=e.position(),i=T.cell(n.pageX,n.pageY),s=l=!0,c=d=M(i),u=f=0,g=0,m=0,y=D=0,b=null,w=null},drag:function(n,a){var i=T.cell(n.pageX,n.pageY);s=!!i,s&&(c=M(i),u=Math.round((a.position.left-o.left)/E),u!=f&&(m=u),c||(y=Math.round((a.position.top-o.top)/S))),(s!=l||c!=d||u!=f||y!=D)&&(c?(b=t.start.clone().stripTime().add(g,"days"),w=b.clone().add(Q.defaultAllDayEventDuration)):(b=t.start.clone().add(y*x).add(g,"days"),w=K(t).add(y*x).add(g,"days")),r(),l=s,d=c,f=u,D=y),e.draggable("option","revert",!s)},stop:function(n,a){if(X(),p("eventDragStop",e[0],t,n,a),s&&(c||m||y)){var l=t.resources.slice(0);if(m){var d=te(),f=d[i.col+m].id,v=d[i.col].id,h=t.resources.indexOf(v),D=t.resources.indexOf(f);D>-1?l.splice(h,1):l[h]=f}I(e[0],t,l,b,n,a)}else s=!0,c=!1,u=0,g=0,y=0,r(),e.css("filter",""),e.css(o),B(t,e)}})}function f(t,e,n){var r,a,o,i=O(),s=W();e.resizable({handles:{s:".ui-resizable-handle"},grid:i,start:function(n,o){r=a=0,j(t,e),p("eventResizeStart",e[0],t,n,o)},resize:function(l,c){if(r=Math.round((Math.max(i,e.height())-c.originalSize.height)/i),r!=a){o=K(t).add(s*r);var d;d=r?v.getEventTimeText(t.start,o):v.getEventTimeText(t),n.text(d),a=r}},stop:function(n,a){p("eventResizeStop",e[0],t,n,a),r?q(e[0],t,o,n,a):B(t,e)}})}var v=this;v.renderEvents=n,v.clearEvents=r,v.slotSegHtml=l,we.call(v);var h=v.opt,p=v.trigger,m=v.isEventDraggable,b=v.isEventResizable,w=v.eventElementHandlers,T=v.setHeight,E=v.getDaySegmentContainer,S=v.getSlotSegmentContainer,x=v.getHoverListener,k=v.computeDateTop,M=v.getIsCellAllDay,R=v.colContentLeft,z=v.colContentRight,H=v.cellToDate,N=function(){return te().length},A=v.getColWidth,O=v.getSnapHeight,W=v.getSnapDuration,L=v.getSlotHeight,Y=v.getSlotDuration,Z=v.getSlotContainer,P=v.reportEventElement,B=v.showEvents,j=v.hideEvents,I=v.eventDrop,q=v.eventResize,$=v.renderDayOverlay,X=v.clearOverlays,V=v.renderDayEvents,G=v.getMinTime,U=v.getMaxTime,Q=v.calendar,J=Q.formatDate,K=Q.getEventEnd,te=v.getResources;v.draggableDayEvent=d}function be(n,r,a){function o(e,n){var r=O[e];return t.isPlainObject(r)&&!i(e)?z(r,n||a):r}function s(t,e){return r.trigger.apply(r,[t,e||H].concat(Array.prototype.slice.call(arguments,2),[H]))}function l(t){var e=t.source||{};return W(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))}function c(t){var e=t.source||{};return W(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))}function d(){A={},F=[]}function u(t,e){F.push({event:t,element:e}),A[t._id]?A[t._id].push(e):A[t._id]=[e]}function f(){t.each(F,function(t,e){H.trigger("eventDestroy",e.event,e.event,e.element)})}function v(t,e){e.click(function(n){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:s("eventClick",this,t,n)}).hover(function(e){s("eventMouseover",this,t,e)},function(e){s("eventMouseout",this,t,e)})}function h(t,e){g(t,e,"show")}function p(t,e){g(t,e,"hide")}function g(t,e,n){var r,a=A[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function m(t,e,n,a,o){var i=r.mutateEvent(e,n,null);s("eventDrop",t,e,i.dateDelta,function(){i.undo(),N(e._id)},a,o),N(e._id)}function y(t,e,n,a,o){var i=r.mutateEvent(e,null,n);s("eventResize",t,e,i.durationDelta,function(){i.undo(),N(e._id)},a,o),N(e._id)}function D(t){return e.isMoment(t)&&(t=t.day()),P[t]}function b(){return Y}function w(t,e,n){var r=t.clone();for(e=e||1;P[(r.day()+(n?e:0)+7)%7];)r.add(e,"days");return r}function T(){var t=C.apply(null,arguments),e=E(t),n=S(e);return n}function C(t,e){var n=H.getColCnt(),r=I?-1:1,a=I?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var o=t*n+(e*r+a);return o}function E(t){var e=H.start.day();return t+=B[e],7*Math.floor(t/Y)+j[(t%Y+Y)%Y]-e}function S(t){return H.start.clone().add(t,"days")}function x(t){var e=k(t),n=M(e),r=R(n);return r}function k(t){return t.clone().stripTime().diff(H.start,"days")}function M(t){var e=H.start.day();return t+=e,Math.floor(t/7)*Y+B[(t%7+7)%7]-B[e]}function R(t){var e=H.getColCnt(),n=I?-1:1,r=I?e-1:0,a=Math.floor(t/e),o=(t%e+e)%e*n+r;return{row:a,col:o}}function _(t,e){var n=H.getRowCnt(),r=H.getColCnt(),a=[],o=k(t),i=k(e),s=+e.time();s&&s>=L&&i++,i=Math.max(i,o+1);for(var l=M(o),c=M(i)-1,d=0;n>d;d++){var u=d*r,f=u+r-1,v=Math.max(l,u),h=Math.min(c,f);if(h>=v){var p=R(v),g=R(h),m=[p.col,g.col].sort(),y=E(v)==o,D=E(h)+1==i;a.push({row:d,leftCol:m[0],rightCol:m[1],isStart:y,isEnd:D})}}return a}var H=this;H.element=n,H.calendar=r,H.name=a,H.opt=o,H.trigger=s,H.isEventDraggable=l,H.isEventResizable=c,H.clearEventData=d,H.reportEventElement=u,H.triggerEventDestroy=f,H.eventElementHandlers=v,H.showEvents=h,H.hideEvents=p,H.eventDrop=m,H.eventResize=y;var N=r.reportEventChange,A={},F=[],O=r.options,L=e.duration(O.nextDayThreshold);H.getEventTimeText=function(t){var e,n;return 2===arguments.length?(e=arguments[0],n=arguments[1]):(e=t.start,n=t.end),n&&o("displayEventEnd")?r.formatRange(e,n,o("timeFormat")):r.formatDate(e,o("timeFormat"))},H.isHiddenDay=D,H.skipHiddenDays=w,H.getCellsPerWeek=b,H.dateToCell=x,H.dateToDayOffset=k,H.dayOffsetToCellOffset=M,H.cellOffsetToCell=R,H.cellToDate=T,H.cellToCellOffset=C,H.cellOffsetToDayOffset=E,H.dayOffsetToDate=S,H.rangeToSegments=_;var Y,Z=o("hiddenDays")||[],P=[],B=[],j=[],I=o("isRTL");(function(){o("weekends")===!1&&Z.push(0,6);for(var e=0,n=0;7>e;e++)B[e]=n,P[e]=-1!=t.inArray(e,Z),P[e]||(j[n]=e,n++);if(Y=n,!Y)throw"invalid hiddenDays"})()}function we(){function e(t,e){var n=r(t,!1,!0);Ce(n,function(t,e){M(t.event,e)}),y(n,e),Ce(n,function(t,e){S("eventAfterRender",t.event,t.event,e)})}function n(t,e,n){var a=r([t],!0,!1),o=[];return Ce(a,function(t,r){t.row===e&&r.css("top",n),o.push(r[0])
}),o}function r(e,n,r){var o,i,c=q(),f=n?t("<div/>"):c,v=a(e);return s(v),o=l(v),f[0].innerHTML=o,i=f.children(),n&&c.append(i),d(v,i),Ce(v,function(t,e){t.hsides=D(e,!0)}),Ce(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),Ce(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(v,r),v}function a(t){var e,n,r=C.getResources,a=[];if(r===void 0)for(e=0;t.length>e;e++)n=i(t[e]),a.push.apply(a,n);else for(e=0;r().length>e;e++)for(var s=o(r()[e],t),l=0;s.length>l;l++)n=i(s[l],e),a.push.apply(a,n);return a}function o(e,n){for(var r=[],a=function(n){return n.resources&&t.grep(n.resources,function(t){return t==e.id}).length},o=0;n.length>o;o++)a(n[o])&&r.push(n[o]);return r}function i(t,e){for(var n=U(t.start,re(t)),r=0;n.length>r;r++)e!==void 0&&(n[r].leftCol=e,n[r].rightCol=e),n[r].event=t;return n}function s(t){for(var e=E("isRTL"),n=0;t.length>n;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?j:P,o=(e?r.isStart:r.isEnd)?I:B,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function l(t){for(var e="",n=0;t.length>n;n++)e+=c(t[n]);return e}function c(t){var e="",n=E("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];x(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=F(r,E);return e+=a?"<a href='"+_(a)+"'":"<div",e+=" class='"+o.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+_(C.getEventTimeText(r))+"</span>"),e+="<span class='fc-event-title'>"+_(r.title||"")+"</span>"+"</div>",r.allDay&&t.isEnd&&k(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(a?"a":"div")+">"}function d(e,n){for(var r=0;e.length>r;r++){var a=e[r],o=a.event,i=n.eq(r),s=S("eventRender",o,o,i);s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function u(t,e){var n,r=f(t),a=m(),o=[];if(e)for(n=0;a.length>n;n++)a[n].height(r[n]);for(n=0;a.length>n;n++)o.push(a[n].position().top);Ce(t,function(t,e){e.css("top",o[t.row]+t.top)})}function f(t){for(var e,n=L(),r=Y(),a=[],o=v(t),i=0;n>i;i++){var s=o[i],l=[];for(e=0;r>e;e++)l.push(0);for(var c=0;s.length>c;c++){var d=s[c];for(d.top=R(l.slice(d.leftCol,d.rightCol+1)),e=d.leftCol;d.rightCol>=e;e++)l[e]=d.top+d.outerHeight}a.push(R(l))}return a}function v(t){var e,n,r,a=L(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;a>r;r++)o[r]=h(o[r]||[]);return o}function h(t){for(var e=[],n=p(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}function p(t){t.sort(Ee);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&Te(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=L(),n=[];for(t=0;e>t;t++)n[t]=Z(t).find("div.fc-day-content > div");return n}function y(t,e){var n=q();Ce(t,function(t,n,r){var a=t.event;a._id===e?b(a,n,t):n[0]._fci=r}),g(n,t,b)}function b(t,e,n){x(t)&&C.draggableDayEvent(t,e,n),t.allDay&&n.isEnd&&k(t)&&C.resizableDayEvent(t,e,n),z(t,e)}function w(t,e){var n,r,a=G();e.draggable({delay:50,opacity:E("dragOpacity"),revertDuration:E("dragRevertDuration"),start:function(o,i){S("eventDragStart",e[0],t,o,i),A(t,e),a.start(function(a,o,i,s){if(e.draggable("option","revert",!a||!i&&!s),X(),a){var l=Q(o),c=Q(a);n=c.diff(l,"days"),r=t.start.clone().add(n,"days"),$(r,re(t).add(n,"days"))}else n=0},o,"drag")},stop:function(o,i){a.stop(),X(),S("eventDragStop",e[0],t,o,i),n?O(e[0],t,r,o,i):(e.css("filter",""),H(t,e))}})}function T(e,r,a){var o=E("isRTL"),i=o?"w":"e",s=r.find(".ui-resizable-"+i),l=!1;N(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(o){function s(n){S("eventResizeStop",r[0],e,n,{}),t("body").css("cursor",""),f.stop(),X(),c&&W(r[0],e,d,n,{}),setTimeout(function(){l=!1},0)}if(1==o.which){l=!0;var c,d,u,f=G(),v=r.css("top"),h=t.extend({},e),p=ee(te(e.start));V(),t("body").css("cursor",i+"-resize").one("mouseup",s),S("eventResizeStart",r[0],e,o,{}),f.start(function(r,o){if(r){var s=J(o),l=J(r);if(l=Math.max(l,p),c=K(l)-K(s),d=re(e).add(c,"days"),c){h.end=d;var f=u;u=n(h,a.row,v),u=t(u),u.find("*").css("cursor",i+"-resize"),f&&f.remove(),A(e)}else u&&(H(e),u.remove(),u=null);X(),$(e.start,d)}},o)}})}var C=this;C.renderDayEvents=e,C.draggableDayEvent=w,C.resizableDayEvent=T;var E=C.opt,S=C.trigger,x=C.isEventDraggable,k=C.isEventResizable,M=C.reportEventElement,z=C.eventElementHandlers,H=C.showEvents,A=C.hideEvents,O=C.eventDrop,W=C.eventResize,L=C.getRowCnt,Y=C.getColCnt,Z=C.allDayRow,P=C.colLeft,B=C.colRight,j=C.colContentLeft,I=C.colContentRight,q=C.getDaySegmentContainer,$=C.renderDayOverlay,X=C.clearOverlays,V=C.clearSelection,G=C.getHoverListener,U=C.rangeToSegments,Q=C.cellToDate,J=C.cellToCellOffset,K=C.cellOffsetToDayOffset,te=C.dateToDayOffset,ee=C.dayOffsetToCellOffset,ne=C.calendar,re=ne.getEventEnd}function Te(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function Ce(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function Ee(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function Se(){function e(e){var n=c("unselectCancel");n&&t(e.target).parents(n).length||r(e)}function n(t,e){r(),t=l.moment(t),e=e?l.moment(e):u(t),f(t,e),a(t,e)}function r(t){h&&(h=!1,v(),d("unselect",null,t))}function a(t,e,n){h=!0,d("select",null,t,e,n)}function o(e){var n=s.cellToDate,o=s.getIsCellAllDay,i=s.getHoverListener(),l=s.reportDayClick;if(1==e.which&&c("selectable")){r(e);var d;i.start(function(t,e){v(),t&&o(t)?(d=[n(e),n(t)].sort(M),f(d[0],d[1].clone().add(1,"days"))):d=null},e),t(document).one("mouseup",function(t){i.stop(),d&&(+d[0]==+d[1]&&l(d[0],t),a(d[0],d[1].clone().add(1,"days"),t))})}}function i(){t(document).off("mousedown",e)}var s=this;s.select=n,s.unselect=r,s.reportSelection=a,s.daySelectionMousedown=o,s.selectionManagerDestroy=i;var l=s.calendar,c=s.opt,d=s.trigger,u=s.defaultSelectionEnd,f=s.renderSelection,v=s.clearSelection,h=!1;c("selectable")&&c("unselectAuto")&&t(document).on("mousedown",e)}function xe(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function ke(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function Me(e){function n(t){Re(t);var n=e.cell(t.pageX,t.pageY);(Boolean(n)!==Boolean(i)||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function Re(t){void 0===t.pageX&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ze(t){function e(e){return r[e]=r[e]||t(e)}var n=this,r={},a={},o={};n.left=function(t){return a[t]=void 0===a[t]?e(t).position().left:a[t]},n.right=function(t){return o[t]=void 0===o[t]?n.left(t)+e(t).width():o[t]},n.clear=function(){r={},a={},o={}}}var _e={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:r,day:"dddd"},timeFormat:{"default":n},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0,windowResizeDelay:200,annotations:[]},He={en:{columnFormat:{week:"ddd M/D"}}},Ne={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},Ae=t.fullCalendar={version:"2.0.2"},Fe=Ae.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(a,o){var i,l=t(o),c=l.data("fullCalendar");"string"==typeof e?c&&t.isFunction(c[e])&&(i=c[e].apply(c,n),a||(r=i),"destroy"===e&&l.removeData("fullCalendar")):c||(c=new s(l,e),l.data("fullCalendar",c),c.render())}),r},Ae.langs=He,Ae.datepickerLang=function(e,n,r){var a=He[e];a||(a=He[e]={}),o(a,{isRTL:r.isRTL,weekNumberTitle:r.weekHeader,titleFormat:{month:r.showMonthAfterYear?"YYYY["+r.yearSuffix+"] MMMM":"MMMM YYYY["+r.yearSuffix+"]"},defaultButtonText:{prev:H(r.prevText),next:H(r.nextText),today:H(r.currentText)}}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=r,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(r))},Ae.lang=function(t,e){var n;e&&(n=He[t],n||(n=He[t]={}),o(n,e||{})),_e.lang=t},Ae.sourceNormalizers=[],Ae.sourceFetchers=[];var Oe={dataType:"json",cache:!1},We=1;Ae.applyAll=O;var Le=["sun","mon","tue","wed","thu","fri","sat"],Ye=/^\s*\d{4}-\d\d$/,Ze=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;Ae.moment=function(){return L(arguments)},Ae.moment.utc=function(){var t=L(arguments,!0);return t.hasTime()&&t.utc(),t},Ae.moment.parseZone=function(){return L(arguments,!0,!0)},Y.prototype=f(e.fn),Y.prototype.clone=function(){return L([this])},Y.prototype.time=function(t){if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Y.prototype.stripTime=function(){var t=this.toArray();return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},Y.prototype.hasTime=function(){return!this._ambigTime},Y.prototype.stripZone=function(){var t=this.toArray(),n=this._ambigTime;return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),n&&(this._ambigTime=!0),this._ambigZone=!0,this},Y.prototype.hasZone=function(){return!this._ambigZone},Y.prototype.zone=function(t){return null!=t&&(delete this._ambigTime,delete this._ambigZone),e.fn.zone.apply(this,arguments)},Y.prototype.local=function(){var t=this.toArray(),n=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,e.fn.local.apply(this,arguments),n&&this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),this},Y.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,e.fn.utc.apply(this,arguments)},Y.prototype.format=function(){return arguments[0]?B(this,arguments[0]):this._ambigTime?P(this,"YYYY-MM-DD"):this._ambigZone?P(this,"YYYY-MM-DD[T]HH:mm:ss"):P(this)},Y.prototype.toISOString=function(){return this._ambigTime?P(this,"YYYY-MM-DD"):this._ambigZone?P(this,"YYYY-MM-DD[T]HH:mm:ss"):e.fn.toISOString.apply(this,arguments)},Y.prototype.isWithin=function(t,e){var n=Z([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},t.each(["isBefore","isAfter","isSame"],function(t,n){Y.prototype[n]=function(t,r){var a=Z([this,t]);return e.fn[n].call(a[0],a[1],r)}});var Pe={t:function(t){return P(t,"a").charAt(0)},T:function(t){return P(t,"A").charAt(0)}};Ae.formatRange=q;var Be={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},je={};Fe.month=U,Fe.basicWeek=Q,Fe.basicDay=J,a({weekMode:"fixed"}),Fe.agendaWeek=ee,Fe.agendaDay=ne,a({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:re,timeFormat:{agenda:ae},dragOpacity:{agenda:.5},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}),Fe.resourceDay=me,a({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:re,timeFormat:{resource:ae},dragOpacity:{resource:.5},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0})});